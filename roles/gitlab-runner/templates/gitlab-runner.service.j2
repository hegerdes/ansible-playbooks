[Unit]
Description=GitLab Runner
ConditionFileIsExecutable=/usr/bin/gitlab-runner

After=network.target

[Service]
StartLimitInterval=5
StartLimitBurst=10
ExecStart=/usr/bin/gitlab-runner "run" "--config" "/home/{{ gitlab_runner_rootless_user }}/gitlab-runner-config.toml" "--working-directory" "/home/{{ gitlab_runner_rootless_user }}" "--service" "gitlab-runner" "--user" "{{ gitlab_runner_rootless_user }}"

Restart=always
RestartSec=120
EnvironmentFile=-/home/{{ gitlab_runner_rootless_user }}/runner.env

[Install]
WantedBy=default.target
